<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Modern Grower's Guide: A Premium Interactive Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Refined Monochromatic with Purposeful Green Accent -->
    <!-- Application Structure Plan: The core four-phase structure is maintained for its clarity. The Video Library has been removed to focus on a text-and-image-only experience. The UI/UX maintains the rigorous Apple-inspired design: enhanced whitespace, a stricter type scale, refined animations, and gradient accents for a premium feel. -->
    <!-- Visualization & Content Choices: Icons are exclusively clean SVGs. Card components have been redesigned with subtle gradients and improved hover states. The core interactive elements (timeline, charts) are retained but restyled to match the sophisticated aesthetic. All video elements have been removed. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 48rem;
            margin-left: auto;
            margin-right: auto;
            height: 24rem;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container { height: 18rem; }
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link.active {
            color: #16a34a;
            font-weight: 600;
        }
        .timeline-item {
            transition: all 0.3s ease-in-out;
        }
        .timeline-item.active {
            background-color: #16a34a;
            color: white;
            box-shadow: 0 4px 14px 0 rgb(0 0 0 / 10%);
        }
        .apple-shadow {
             box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
        }
        .apple-shadow-lg {
             box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.07);
        }
        .card-hover-effect {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover-effect:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="text-gray-800 antialiased">

    <header class="bg-white/80 backdrop-blur-lg fixed top-0 left-0 right-0 z-50 border-b border-gray-200/80">
        <nav class="container mx-auto px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0 flex items-center gap-2">
                     <svg class="h-6 w-6 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632m14.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632" />
                    </svg>
                    <h1 class="text-lg font-bold text-gray-900 tracking-tight">The Modern Grower's Guide</h1>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#legal" class="nav-link text-gray-500 hover:text-gray-900 text-sm font-medium">Compliance</a>
                    <a href="#equipment" class="nav-link text-gray-500 hover:text-gray-900 text-sm font-medium">System</a>
                    <a href="#cycle" class="nav-link text-gray-500 hover:text-gray-900 text-sm font-medium">Process</a>
                    <a href="#clinic" class="nav-link text-gray-500 hover:text-gray-900 text-sm font-medium">Clinic</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="pt-16">
        <section id="hero" class="py-24 sm:py-32">
            <div class="container mx-auto px-6 lg:px-8 text-center">
                <h2 class="text-5xl font-extrabold tracking-tight text-gray-900 sm:text-7xl">Cultivation, Perfected.</h2>
                <p class="mt-6 max-w-3xl mx-auto text-xl leading-8 text-gray-600">An intelligent, automated approach to home cultivation. This guide unlocks the potential of your space, delivering consistent, high-quality results with precision engineering.</p>
                 <div class="mt-10 flex items-center justify-center gap-x-6">
                    <a href="#legal" class="rounded-md bg-green-600 px-5 py-3 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600">Start the Guide</a>
                    <a href="#equipment" class="text-sm font-semibold leading-6 text-gray-900">Explore the System <span aria-hidden="true">â†’</span></a>
                </div>
            </div>
        </section>
        
        <section id="legal" class="py-20 sm:py-24 bg-white">
            <div class="container mx-auto px-6 lg:px-8">
                <div class="max-w-3xl mx-auto text-center">
                    <h3 class="text-base font-semibold text-green-600 tracking-wide">Phase 1</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900 tracking-tight sm:text-4xl">Compliance Framework</p>
                    <p class="mt-4 text-lg text-gray-600">Laws vary significantly by location. This is not legal advice, but a guide to help you understand your local rules. Always verify your region's specific laws before starting.</p>
                </div>
                <div class="mt-16 max-w-5xl mx-auto grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-8 rounded-2xl border border-gray-200/80 apple-shadow card-hover-effect">
                         <h4 class="text-xl font-semibold text-gray-900 mb-4">Legal Checklist: Know Your Laws</h4>
                         <ul class="space-y-4 text-gray-700">
                             <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">&#10003;</span><span><strong>Jurisdiction:</strong> Is home cultivation legal in your state/province and city/municipality?</span></li>
                             <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">&#10003;</span><span><strong>Recreational vs. Medical:</strong> Are you growing under recreational or medical rules? Medical programs often allow higher plant counts but require a patient card.</span></li>
                             <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">&#10003;</span><span><strong>Plant Count:</strong> What is the maximum number of plants allowed per person or household? Note the difference between mature (flowering) and immature (vegetative) plants.</span></li>
                         </ul>
                    </div>
                    <div class="bg-white p-8 rounded-2xl border border-gray-200/80 apple-shadow card-hover-effect">
                        <h4 class="text-xl font-semibold text-gray-900 mb-4">Security & Discretion Rules</h4>
                        <ul class="space-y-4 text-gray-700">
                             <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">&#10003;</span><span><strong>Visibility:</strong> Plants must not be visible to the public from outside your property.</span></li>
                             <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">&#10003;</span><span><strong>Security:</strong> The grow area must be in an enclosed, locked space. This is a near-universal requirement.</span></li>
                             <li class="flex items-start"><span class="text-red-500 mr-3 mt-1">&#10007;</span><span><strong>Restrictions:</strong> Check for rules regarding proximity to schools or parks, and whether property owners or HOAs permit cultivation.</span></li>
                         </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="equipment" class="py-20 sm:py-24">
            <div class="container mx-auto px-6 lg:px-8">
                <div class="max-w-3xl mx-auto text-center">
                    <h3 class="text-base font-semibold text-green-600 tracking-wide">Phase 2</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900 tracking-tight sm:text-4xl">The Automated Ecosystem</p>
                    <p class="mt-4 text-lg text-gray-600">Precision-engineered components working in harmony. This is the hardware that powers consistent, high-quality results.</p>
                </div>
                <div id="equipment-grid" class="mt-16 grid gap-8 md:grid-cols-2 lg:grid-cols-3"></div>
            </div>
        </section>

        <section id="cycle" class="py-20 sm:py-24 bg-white">
            <div class="container mx-auto px-6 lg:px-8">
                 <div class="max-w-3xl mx-auto text-center">
                    <h3 class="text-base font-semibold text-green-600 tracking-wide">Phase 3</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900 tracking-tight sm:text-4xl">The Grow Process</p>
                    <p class="mt-4 text-lg text-gray-600">From seed to harvest, a data-driven journey. Select a stage to view its unique parameters and objectives.</p>
                </div>

                <div class="mt-16">
                    <div id="timeline-nav" class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-12 p-2 bg-gray-100 rounded-full max-w-2xl mx-auto"></div>
                    <div class="grid lg:grid-cols-2 gap-12 items-start">
                        <div class="bg-white p-8 rounded-2xl border border-gray-200/80 apple-shadow min-h-[400px]">
                             <div id="cycle-content"></div>
                        </div>
                        <div id="cycle-image-container" class="lg:sticky top-32">
                           <div class="aspect-w-1 aspect-h-1 rounded-2xl overflow-hidden apple-shadow-lg">
                               <img id="cycle-image" src="" alt="Visual representation of the current grow cycle stage" class="w-full h-full object-cover transition-opacity duration-500">
                           </div>
                        </div>
                    </div>
                </div>

                 <div class="mt-24">
                    <h4 class="text-2xl font-bold text-center mb-8 text-gray-900">Environmental Data</h4>
                     <div class="chart-container"><canvas id="envChart"></canvas></div>
                </div>

            </div>
        </section>

        <section id="clinic" class="py-20 sm:py-24">
            <div class="container mx-auto px-6 lg:px-8">
                <div class="max-w-3xl mx-auto text-center">
                    <h3 class="text-base font-semibold text-green-600 tracking-wide">Phase 4</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900 tracking-tight sm:text-4xl">Diagnostic Clinic</p>
                    <p class="mt-4 text-lg text-gray-600">Quickly diagnose and resolve common issues with this interactive troubleshooting tool.</p>
                </div>

                <div class="mt-16 max-w-4xl mx-auto">
                    <div id="symptom-categories" class="flex flex-wrap justify-center gap-3 mb-8"></div>
                    <div id="problem-list" class="grid sm:grid-cols-2 gap-4"></div>
                    <div id="solution-display" class="mt-8 p-8 bg-green-50 rounded-2xl border border-green-200 hidden">
                        <h4 id="solution-title" class="text-xl font-semibold text-green-900"></h4>
                        <p id="solution-text" class="mt-2 text-green-800"></p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-gray-200/80">
        <div class="container mx-auto py-12 px-6 lg:px-8 text-center text-gray-500">
            <p class="text-sm">This interactive guide is for informational purposes only and does not constitute legal advice. Always research and comply with all current federal, state, and local laws regarding cannabis cultivation in your area.</p>
        </div>
    </footer>

    <script>
        const appData = {
            equipment: [
                { id: 'enclosure', title: 'Grow Tent', imageUrl: 'https://placehold.co/600x400/e5e7eb/374151?text=Grow+Tent', details: 'A 5\'x5\' tent provides a reflective, contained, and easy-to-control environment, ideal for beginners.' },
                { id: 'lighting', title: 'LED Lighting', imageUrl: 'https://placehold.co/600x400/e5e7eb/374151?text=LED+Light', details: 'A 750W-800W bar-style LED offers efficient, full-spectrum light with even coverage essential for quality growth.' },
                { id: 'controller', title: 'Environment Controller', imageUrl: 'https://placehold.co/600x400/e5e7eb/374151?text=Controller', details: 'The brain of the system. It automates fans and lights to maintain perfect temperature and humidity.' },
                { id: 'ventilation', title: 'Airflow & Filtration', imageUrl: 'https://placehold.co/600x400/e5e7eb/374151?text=Ventilation', details: 'A 6" inline fan with a carbon filter is crucial for removing heat, humidity, and odor.' },
                { id: 'irrigation', title: 'Automated Irrigation', imageUrl: 'https://placehold.co/600x400/e5e7eb/374151?text=Irrigation', details: 'A gravity-fed system like AutoPot provides consistent watering without electricity, preventing common errors.' },
                { id: 'medium', title: 'Medium & Nutrients', imageUrl: 'https://placehold.co/600x400/e5e7eb/374151?text=Nutrients', details: 'A 70/30 coco/perlite mix with liquid nutrients gives you total control over your plant\'s diet.' }
            ],
            growCycle: [
                 { id: 'germination', name: 'Germination', imageUrl: 'https://placehold.co/600x600/e0f2f1/004d40?text=Germination', content: `<h4 class="text-2xl font-semibold mb-3 text-gray-900">Stage 1: Germination (1-7 Days)</h4><p class="text-gray-600 mb-6">The journey begins. The goal is to awaken the dormant seed and encourage its primary taproot to emerge.</p><ul class="space-y-3 text-gray-700"><li class="flex"><strong class="w-28 font-medium">Light:</strong> 18/6 Cycle</li><li class="flex"><strong class="w-28 font-medium">Temp:</strong> 72-79Â°F</li><li class="flex"><strong class="w-28 font-medium">Humidity:</strong> 65-80%</li><li class="flex"><strong class="w-28 font-medium">Action:</strong> Use the paper towel method in a warm, dark place. Plant when taproot is ~0.5" long.</li></ul>`},
                { id: 'seedling', name: 'Seedling', imageUrl: 'https://placehold.co/600x600/dcedc8/2e7d32?text=Seedling', content: `<h4 class="text-2xl font-semibold mb-3 text-gray-900">Stage 2: Seedling (2-3 Weeks)</h4><p class="text-gray-600 mb-6">The plant's most vulnerable phase. Focus is on establishing a stable root system and the first set of true leaves.</p><ul class="space-y-3 text-gray-700"><li class="flex"><strong class="w-28 font-medium">Light:</strong> 18/6 Cycle</li><li class="flex"><strong class="w-28 font-medium">Temp:</strong> 72-79Â°F</li><li class="flex"><strong class="w-28 font-medium">Humidity:</strong> 65-80%</li><li class="flex"><strong class="w-28 font-medium">Action:</strong> Water sparingly. Introduce 1/4 strength nutrients after the first week.</li></ul>`},
                { id: 'vegetative', name: 'Vegetative', imageUrl: 'https://placehold.co/600x600/c8e6c9/388e3c?text=Vegetative', content: `<h4 class="text-2xl font-semibold mb-3 text-gray-900">Stage 3: Vegetative (3-8+ Weeks)</h4><p class="text-gray-600 mb-6">Explosive growth. The plant builds its "chassis" of leaves and branches. This is the ideal time to train your plant.</p><ul class="space-y-3 text-gray-700"><li class="flex"><strong class="w-28 font-medium">Light:</strong> 18/6 Cycle</li><li class="flex"><strong class="w-28 font-medium">Temp:</strong> 70-85Â°F</li><li class="flex"><strong class="w-28 font-medium">Humidity:</strong> 45-60%</li><li class="flex"><strong class="w-28 font-medium">Action:</strong> Begin Topping and Low-Stress Training (LST) to create an even canopy for maximum light exposure.</li></ul>`},
                { id: 'flowering', name: 'Flowering', imageUrl: 'https://placehold.co/600x600/a5d6a7/2e7d32?text=Flowering', content: `<h4 class="text-2xl font-semibold mb-3 text-gray-900">Stage 4: Flowering (8-12 Weeks)</h4><p class="text-gray-600 mb-6">The grand finale. Triggered by a 12/12 light cycle, the plant shifts all energy to producing resinous buds.</p><ul class="space-y-3 text-gray-700"><li class="flex"><strong class="w-28 font-medium">Light:</strong> 12/12 Cycle</li><li class="flex"><strong class="w-28 font-medium">Temp:</strong> 64-78Â°F</li><li class="flex"><strong class="w-28 font-medium">Humidity:</strong> 40-50%</li><li class="flex"><strong class="w-28 font-medium">Action:</strong> Switch to "bloom" nutrients. Ensure uninterrupted darkness during the "off" cycle.</li></ul>`},
                { id: 'harvest', name: 'Harvest', imageUrl: 'https://placehold.co/600x600/81c784/1b5e20?text=Harvest', content: `<h4 class="text-2xl font-semibold mb-3 text-gray-900">Stage 5: Harvest & Cure</h4><p class="text-gray-600 mb-6">The culmination of your efforts. Proper drying and curing is essential to unlock the plant's full potential for flavor and potency.</p><ul class="space-y-3 text-gray-700"><li class="flex"><strong class="w-28 font-medium">Timing:</strong> Harvest when trichomes are mostly cloudy with 10-20% amber.</li><li class="flex"><strong class="w-28 font-medium">Drying:</strong> 7-14 days at ~60Â°F / 60% RH.</li><li class="flex"><strong class="w-28 font-medium">Curing:</strong> At least 2 weeks in airtight jars, burped daily.</li></ul>`}
            ],
            clinic: {
                categories: ['Nutrient Deficiencies', 'Common Pests', 'Diseases', 'Environmental Stress'],
                problems: [
                    { category: 'Nutrient Deficiencies', title: 'Yellowing Lower Leaves', diagnosis: 'Nitrogen (N) Deficiency', solution: 'This is the most common deficiency. First, ensure your nutrient solution\'s pH is correct (5.5-6.5 for coco). If pH is correct, increase the amount of nitrogen in your feeding solution (e.g., the "Grow" component).' },
                    { category: 'Nutrient Deficiencies', title: 'Brown Spots on New Leaves', diagnosis: 'Calcium/Magnesium (Cal/Mag) Deficiency', solution: 'Common in coco coir. First, check pH. If correct, add a dedicated Cal-Mag supplement to your nutrient solution with every feeding. Ensure your coco was properly buffered before use.' },
                    { category: 'Nutrient Deficiencies', title: 'Scorched Leaf Edges', diagnosis: 'Potassium (K) Deficiency', solution: 'Yellowing and browning appears on the edges of older leaves. Check pH first. If correct, ensure you are using a balanced bloom fertilizer during the flowering stage, which is rich in Potassium.' },
                    { category: 'Common Pests', title: 'Fine Webbing on Buds/Leaves', diagnosis: 'Spider Mites', solution: 'These pests thrive in hot, dry conditions. Increase humidity slightly and improve air circulation. Treat with an organic spray like neem oil or insecticidal soap, focusing on the undersides of leaves. Do not spray during late flowering.' },
                    { category: 'CommonPests', title: 'Small Black Flies Around Soil', diagnosis: 'Fungus Gnats', solution: 'This is a sign of overwatering. Allow the top layer of your growing medium to dry out completely between waterings. Use yellow sticky traps to catch the adult flies and break the breeding cycle.' },
                    { category: 'Diseases', title: 'White Powdery Dust on Leaves', diagnosis: 'Powdery Mildew (PM)', solution: 'This fungus thrives in high humidity with poor airflow. Immediately lower humidity to below 50% and increase air circulation from all fans. Treat with a spray of potassium bicarbonate or a dedicated organic fungicide. Remove heavily affected leaves.' },
                    { category: 'Environmental Stress', title: 'Top Leaves Whitening/Bleaching', diagnosis: 'Light Burn', solution: 'The top leaves and buds closest to the light turn yellow or white. The light is too intense or too close. Increase the distance between the light and the plant canopy, or dim the light\'s intensity.' },
                    { category: 'Environmental Stress', title: 'Leaves Curling Up ("Tacoing")', diagnosis: 'Heat Stress', solution: 'Leaves wilt and curl upwards at the edges, even if well-watered. This is a sign of excessive heat. Ensure your exhaust fan is running effectively to remove hot air from the tent. Consider running lights at night if your garage is cooler then.' }
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const equipmentGrid = document.getElementById('equipment-grid');
            appData.equipment.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl overflow-hidden apple-shadow card-hover-effect';
                card.innerHTML = `<div class="aspect-w-3 aspect-h-2"><img src="${item.imageUrl}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Missing';" alt="${item.title}" class="w-full h-full object-cover"></div><div class="p-6"><h3 class="text-lg font-semibold text-gray-900">${item.title}</h3><p class="mt-2 text-sm text-gray-600">${item.details}</p></div>`;
                equipmentGrid.appendChild(card);
            });

            const timelineNav = document.getElementById('timeline-nav');
            appData.growCycle.forEach((stage) => {
                const item = document.createElement('button');
                item.className = 'timeline-item cursor-pointer text-center px-4 py-2 rounded-full text-sm font-medium text-gray-600 bg-white hover:bg-gray-200/50';
                item.dataset.stageId = stage.id;
                item.textContent = stage.name;
                item.onclick = () => updateCycleContent(stage.id);
                timelineNav.appendChild(item);
            });
            
            const symptomCategories = document.getElementById('symptom-categories');
            appData.clinic.categories.forEach(cat => {
                const button = document.createElement('button');
                button.className = 'px-4 py-2 bg-white text-gray-700 rounded-full apple-shadow hover:bg-gray-200/50 transition-colors duration-200 text-sm font-medium';
                button.textContent = cat;
                button.onclick = () => displayProblems(cat);
                symptomCategories.appendChild(button);
            });
            
            setupCharts();
            updateCycleContent(appData.growCycle[0].id);
            displayProblems(appData.clinic.categories[0]);
            setupScrollSpy();
        });

        function updateCycleContent(stageId) {
            const stageData = appData.growCycle.find(s => s.id === stageId);
            document.getElementById('cycle-content').innerHTML = stageData.content;
            
            const cycleImage = document.getElementById('cycle-image');
            cycleImage.style.opacity = '0';
            setTimeout(() => {
                cycleImage.src = stageData.imageUrl;
                cycleImage.onerror = () => { cycleImage.src = `https://placehold.co/600x600/cccccc/333333?text=${stageData.name}`; };
                cycleImage.alt = `A plant in the ${stageData.name} stage.`;
                cycleImage.style.opacity = '1';
            }, 300);

            document.querySelectorAll('.timeline-item').forEach(item => {
                item.classList.toggle('active', item.dataset.stageId === stageId);
                item.classList.toggle('bg-white', item.dataset.stageId !== stageId);
                item.classList.toggle('text-gray-600', item.dataset.stageId !== stageId);
            });
        }

        function displayProblems(category) {
            const problemList = document.getElementById('problem-list');
            const solutionDisplay = document.getElementById('solution-display');
            problemList.innerHTML = '';
            solutionDisplay.classList.add('hidden');
            const filteredProblems = appData.clinic.problems.filter(p => p.category.replace(/\s+/g, '') === category.replace(/\s+/g, ''));
            
            filteredProblems.forEach(problem => {
                const button = document.createElement('button');
                button.className = 'w-full text-left p-5 bg-white rounded-xl apple-shadow card-hover-effect';
                button.innerHTML = `<h5 class="font-medium text-gray-800">${problem.title}</h5>`;
                button.onclick = () => displaySolution(problem);
                problemList.appendChild(button);
            });
        }

        function displaySolution(problem) {
            const solutionDisplay = document.getElementById('solution-display');
            document.getElementById('solution-title').textContent = problem.diagnosis;
            document.getElementById('solution-text').textContent = problem.solution;
            solutionDisplay.classList.remove('hidden');
            solutionDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        let envChartInstance;
        function setupCharts() {
            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.color = '#6b7280';
            
            const envCtx = document.getElementById('envChart').getContext('2d');
            const labels = appData.growCycle.map(s => s.name);
            
            envChartInstance = new Chart(envCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Max Temp (Â°F)', data: [79, 79, 85, 78, 70], borderColor: 'rgba(239, 68, 68, 0.6)', backgroundColor: 'rgba(239, 68, 68, 0.1)', fill: false, tension: 0.4, pointBackgroundColor: 'rgba(239, 68, 68, 0.6)' },
                        { label: 'Min Temp (Â°F)', data: [72, 72, 70, 64, 60], borderColor: 'rgba(239, 68, 68, 0.6)', backgroundColor: 'rgba(239, 68, 68, 0.1)', fill: '-1', tension: 0.4, pointBackgroundColor: 'rgba(239, 68, 68, 0.6)' },
                        { label: 'Max Humidity (%)', data: [80, 80, 60, 50, 60], borderColor: 'rgba(59, 130, 246, 0.6)', backgroundColor: 'rgba(59, 130, 246, 0.1)', fill: false, tension: 0.4, pointBackgroundColor: 'rgba(59, 130, 246, 0.6)'},
                        { label: 'Min Humidity (%)', data: [65, 65, 45, 40, 45], borderColor: 'rgba(59, 130, 246, 0.6)', backgroundColor: 'rgba(59, 130, 246, 0.1)', fill: '-1', tension: 0.4, pointBackgroundColor: 'rgba(59, 130, 246, 0.6)'}
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: false, grid: { color: '#e5e7eb' } }, x: { grid: { display: false } } }, plugins: { legend: { position: 'bottom', labels: { usePointStyle: true, boxHeight: 8 } }, tooltip: { mode: 'index', intersect: false } } }
            });
        }
        
        function setupScrollSpy() {
            const sections = document.querySelectorAll('main section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            const headerOffset = document.querySelector('header').offsetHeight;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    const navLink = document.querySelector(`.nav-link[href="#${id}"]`);
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => link.classList.remove('active'));
                        if (navLink) navLink.classList.add('active');
                    }
                });
            }, { rootMargin: `-${headerOffset}px 0px -60% 0px` });

            sections.forEach(section => { observer.observe(section); });
        }

    </script>
</body>
</html>

